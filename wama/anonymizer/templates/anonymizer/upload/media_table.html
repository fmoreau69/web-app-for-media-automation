<table class="table table-bordered table-dark align-middle" id="medias">
    <thead>
    <tr>
        <td class="col-sm-1 fw-bold text-center text-bg-secondary">Options</td>
        <td class="col-sm-4 fw-bold text-center text-bg-secondary">Media</td>
        <td class="col-sm-2 fw-bold text-center text-bg-secondary">Properties</td>
        <td class="col-sm-1,5 fw-bold text-center text-bg-secondary">Duration</td>
        <td class="col-sm-1,5 fw-bold text-center text-bg-secondary">Progress</td>
        <td class="col-sm-1 fw-bold text-center text-bg-secondary">Actions</td>
    </tr>
    </thead>
    <tbody>
    {% for media in medias %}
    {% if user.id == media.user.id %}
    <tr data-media-id="{{ media.id }}">
        <td class="text-center">
            <div class="d-flex justify-content-center align-items-center">
                <form method="post" action="{% url 'anonymizer:expand_area' %}">
                    {% csrf_token %}
                    <a class="btn btn-info btn-sm text-center" id="button_show_ms"
                       data-bs-toggle="collapse" href="#collapseMediaSettings_{{ media.id }}"
                       aria-expanded="false" aria-controls="collapseMediaSettings_{{ media.id }}">
                        <i class="fas fa-arrow-down"></i>
                    </a>
                </form>
            </div>
        </td>
        <td class="text-center">
            <button type="button"
                    class="btn btn-link p-0 preview-media-link"
                    data-preview-url="{% url 'anonymizer:preview_media' media.id %}">
                {{ media.file.name|slice:"12:" }}
            </button>
        </td>
        <td class="text-center">{{ media.width }}x{{ media.height }} ({{ media.fps }}fps)</td>
        <td class="text-center">{{ media.duration_inMinSec }}</td>
        <td class=text-center">
            <div class="progress text-center" role="progressbar" aria-label="Blur progress"
                 aria-valuenow="{{ media.blur_progress }}" aria-valuemin="0" aria-valuemax="100" style="height: 24px">
                <div class="progress-bar" role="progressbar" style="width: {{ media.blur_progress }}%;">
                    {{ media.blur_progress }}%</div>
            </div>
        </td>
        <td class="text-center">
            <div class="col-auto">
                <div class="btn-group" role="group">
                    <form method="post" action="{% url 'anonymizer:reset_media_settings' %}" class="me-1 ajax-form" data-target="#main_container">
                        {% csrf_token %}
                        <input type="hidden" name="next" value="{{ request.path }}">
                        <input type="hidden" name="media_id" value="{{ media.id }}">
                        <button type="submit" class="btn btn-danger btn-sm" title="Reset settings">
                            <i class="fas fa-rotate-left"></i>
                        </button>
                    </form>
                    <form method="post" action="{% url 'anonymizer:clear_media' %}" class="me-1 ajax-form" data-target="#main_container">
                        {% csrf_token %}
                        <input type="hidden" name="next" value="{{ request.path }}">
                        <input type="hidden" name="media_id" value="{{ media.id }}">
                        <button type="submit" class="btn btn-danger btn-sm" title="Delete media">
                            <i class="far fa-trash-can"></i>
                        </button>
                    </form>
                    <form method="post" action="{% url 'anonymizer:download_media' %}">
                        {% csrf_token %}
                        <button type="submit" class="btn btn-success btn-sm text-center" {% if not media.processed %} disabled {% else %} active>{% endif %}
                            <input type="hidden" name="media_id" value="{{ media.id }}">
                            <i class="fas fa-download"></i>
                        </button>
                    </form>
                </div>
            </div>
        </td>
    </tr>
    <tr {% if media.show_ms %} class="collapse show" {% else %} class="collapse" {% endif %} id="collapseMediaSettings_{{ media.id }}">
        <td colspan="12">
            <div id="media_settings_container_{{ media.id }}">
                {% include "anonymizer/upload/media_settings.html" %}
            </div>
        </td>
    </tr>
    {% endif %}
    {% endfor %}
    </tbody>
</table>
